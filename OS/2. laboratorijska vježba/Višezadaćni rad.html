
<!-- saved from url=(0054)http://www.zemris.fer.hr/predmeti/os/pripreme/z2b.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-2">
<title>Vi¹ezadaæni rad</title>
</head>
<body lang="EN-GB">
<h2>Lamportov<b> postupak meðusobnog iskljuèivanja</b></h2><h3><b>Zadatak</b></h3><p>Ostvariti sustav paralelnih procesa/dretvi. 
Primjer strukture procesa, odnosno dretve dana je sljedeæim pseudokodom:</p>
<p>Ostvariti program koji simulira tijek rezervacije stolova u nekom restoranu. 
Program na poèetku treba stvoriti odreðeni broj dretvi/procesa koji se zadaje u 
naredbenom retku. Svaka dretva/proces nakon isteka jedne sekunde provjerava ima 
li slobodnih stolova te sluèajno odabire jedan od njih. Nakon odabira dretva 
ulazi u kritièni odsjeèak te ponovo provjerava je li odabrani stol slobodan. Ako 
jest, oznaèava stol zauzetim i izlazi iz kritiènog odsjeèka. U oba sluèaja, 
nakon obavljene operacije ispisuje trenutno stanje svih stolova te podatke o 
obavljenoj rezervaciji. Prilikom ispisa za svaki stol mora biti vidljivo je li 
slobodan ili broj dretve/procesa koja je taj stol rezervirala. Broj stolova se 
takoðer zadaje u naredbenom retku. Svaka dretva/proces ponavlja isti postupak 
sve dok vi¹e nema slobodnih stolova. Program zavr¹ava kada sve dretve/procesi 
zavr¹e. </p>
<p>Primjer ispisa: (3 dretve, 5 stolova) </p>
<p><font face="Courier New">Dretva 1: odabirem stol 2 <br>
Dretva 2: odabirem stol 2 <br>
Dretva 3: odabirem stol 5 <br>
Dretva 2: rezerviram stol 2, stanje: <br>
-2--- <br>
Dretva 1: neuspjela rezervacija stola 2, stanje: <br>
-2--- <br>
Dretva 3: rezerviram stol 5, stanje: <br>
-2--3 <br>
itd.</font></p>
<p>Za¹titu kritiènog odsjeèka postupka rezervacije stola ostvariti za vi¹e procesa/dretvi 
koristeæi 
Lamportov algoritam meðusobnog iskljuèivanja.</p>
<h3>Lamportov<b> algoritam:</b></h3>

<pre style="margin: 0cm 0cm 0.0001pt; font-size: 10pt; font-family: Courier New;"><u>zajednièke varijable</u>: TRA®IM[0..<b>n</b>-1], BROJ[0..<b>n</b>-1]</pre>
<pre><u>funkcija</u> uði_u_kritièni_odsjeèak(i)
{
&nbsp;&nbsp; TRA®IM[<b>i</b>] = 1
&nbsp;&nbsp; BROJ[<b>i</b>] = <b>max</b>(BROJ[0],...,BROJ[<b>n</b>-1]) + 1
&nbsp;&nbsp; TRA®IM[<b>i</b>] = 0

&nbsp;&nbsp; <u>za</u> <b>j</b> = 0 <u>do</u> <b>n</b>-1 <u>èini</u>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <u>dok je</u> TRA®IM[<b>j</b>] &lt;&gt; 0 <u>èini</u>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <u>ni¹ta</u>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <u>dok je</u> BROJ[j] &lt;&gt; 0 &amp;&amp; (BROJ[j] &lt; BROJ[i] || (BROJ[j] == BROJ[i] &amp;&amp; j &lt; i)) <u>èini</u>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <u>ni¹ta
</u>}
&nbsp;
<u>funkcija</u> izaði_iz_kritiènog_odsjeèka(i)
{
   BROJ[<b>i</b>] = 0
}</pre>
<p style=""><b>Upute:</b></p>
<p><font color="#FF0000">Ako se program rje¹ava s procesima tada treba zajednièke varijable tako organizirati da se prostor za njih zauzme odjednom i podijeli meðu njima. Ovo je nu¾no zbog ogranièenog broja segmenata i velikog broja korisnika.</font></p>

</body></html>